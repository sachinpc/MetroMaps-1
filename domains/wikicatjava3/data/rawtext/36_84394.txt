ingres database ingres database   is a commercially supported opensource sql relational database management system intended to support large commercial and government applications ingres database is fully open source with a global community of contributors however actian corporation controls the development of ingres and makes certified binaries available for download as well as providing worldwide support ingres began as a research project at the university of california berkeley starting in the early s and ending in  the original code like that from other projects at berkeley was available at minimal cost under a version of the bsd license ingres spawned a number of commercial database applications including sybase microsoft sql server nonstop sql and a number of others postgres post ingres a project which started in the mids later evolved into postgresql it is acid compatible and is fully transactional including all ddl statements and is part of the lisog opensource stack initiative history in  when the system r project was getting started at ibm the research team released a series of papers describing the system they were building two scientists at berkeley michael stonebraker and eugene wong became interested in the concept after reading the papers and started a relational database research project of their own named university ingres they had already raised money for researching a geographic database system for berkeleys economics group which they called ingres for interactive graphics retrieval system they decided to use this money to fund their relational project instead and used this as a seed for a new and much larger project for further funding stonebraker approached the darpa the obvious funding source for computing research and development at the time but both the darpa and the office of naval research onr turned them down as they were already funding database research elsewhere stonebraker then introduced his idea to other agencies and with help from his colleagues he eventually obtained modest support from the nsf and three military agencies the air force office of scientific research the army research office and the navy electronic systems command thus funded ingres was developed during the mids by a rotating team of students and staff ingres went through an evolution similar to that of system r with an early prototype in  followed by major revisions to make the code maintainable ingres was then disseminated to a small user community and project members rewrote the prototype repeatedly to incorporate accumulated experience feedback from users and new ideas the research projected ended in  ingres remained largely similar to ibms system r in concept but it was based on lowend systems namely unix on dec machines commercialization unlike system r the ingres source code was available on tape for a modest fee by  some  copies had been distributed primarily to universities many students from uc berkeley and other universities who used the ingres source code worked on various commercial database software systems berkeley students jerry held and later karel youseffi moved to tandem computers where they built a system that evolved into nonstop sql the tandem database system was a reimplementation of the ingres technology it evolved into a system that ran effectively on parallel computers that is it included functionality for distributed data distributed execution and distributed transactions the last being fairly difficult components of the system were first released in the late s by  the system could run queries in parallel and the product became fairly famous for being one of the few systems that scales almost linearly with the number of processors in the machine adding a second cpu to an existing nonstop sql server will almost exactly double its performance tandem was later purchased by compaq which started a rewrite in  and now the product is at hewlettpackard in the early s ingres competed headtohead with oracle the two products were widely regarded as the leading hardwareindependent relational database implementations they had comparable functionality performance market share and pricing and many commentators considered ingres to be a perhaps marginally superior product from around  however ingres steadily lost market share one reason was oracles aggressive marketing another was the increasing recognition of sql as the preferred relational query language ingres originally had provided a different language quel and the conversion to sql delivered in ingres version  took about three years losing valuable time in the race robert epstein the chief programmer on the project while he was at berkeley formed britton lee inc along with other students from the ingres project paula hawthorn and michael ubell they were joined later by eric allman later epstein founded sybase sybase had been the  product behind oracle for some time through the s and into the s before informix came out of nowhere and took over in  sybases product line had also been licensed to microsoft in  who rebranded it as microsoft sql server this relationship soured in the late s and today sql server outsells sybase by a wide margin several companies used the ingres source code to produce products the most successful was a company named relational technology inc rti founded in  by stonebraker and wong and another berkeley professor lawrence a rowe rti was renamed ingres corporation in the late s the company converted the code to dec vaxvms which was the commercial operating system for dec vax computers they also developed a collection of frontend tools for creating and manipulating databases eg reporterwriters forms entry and update etc and application development tools over time much of the source was rewritten to add functionality for example multiplestatement transactions sql btree access method datetime datatypes etc and improve performance for example compiled queries multithreaded server the company was purchased by ask corporation in november  the founders left the company over the next several months in  askingres was purchased by computer associates who continued to offer ingres under a variety of brand names for example openingres ingres ii or advantage ingres in  computer associates released ingres r under an open source license the code includes the dbms server and utilities and the characterbased frontend and applicationdevelopment tools in essence the code has everything except openroad the windows gl guibased development environment in november  garnett  helfrich capital in partnership with computer associates created a new company called ingres corporation which provided support and services for ingres openroad and the connectivity products recent years in february  ingres corporation released ingres  under the gnu general public licence ingres  was released on october   it was a limited release targeted at new application development on linux and windows only ingres  was released on october   as a full release supporting upgrade from earlier versions of the product it was available on bit and bit linux and bit microsoft windows opensource community initiatives with ingres included community bundles  alliances with other opensource providers and projects such as alfresco jaspersoft hibernate apache tomcat and eclipse enable ingres to provide its platform and technology with other opensource technologies established by ingres and carleton university a series of open source boot camps were held in  to work with other opensource communities and projects to introduce university and college students and staff to the concepts and realities of open source other involvement includes global ingres university alliances ingres engineering summit ingres janitors project and several memberships in opensource initiatives ingres icebreaker is an appliance that combines the ingres database with the linux operating system enabling people to simultaneously deploy and manage a database and operating system ingres caf consolidated application foundation for eclipse created by a team of developers at carleton university is an integrated environment that helps software architects accelerate and simplify java application development ingres geospatial was communitybased project to create industrystandardscompliant geospatial storage features in the ingres dbms in other words for storing map data and providing powerful analysis functions within the dbms in november  garnett  helfrich capital acquired the last  of equity in ingres corp that it did not already own on september   ingres corporation became actian corporation it focused on action apps which use ingres or vectorwise rdbms systems postgres the postgres project was started to address limitations of existing databasemanagement implementations of the relational model primary among these was their inability to let the user define new domains or types which are combinations of simpler domains see relational model for an explanation of the term domain the project explored other ideas including the incorporation of writeonce media eg optical disks the use of massive storage eg never delete data inferencing and objectoriented data models the implementation also experimented with new interfaces between the database and application programs eg portals which are sometimes referred to as fat cursors the resulting project named postgres aimed at introducing the minimum number of features needed to add complete types support these included the ability to define types but also the ability to fully describe relationships  which up until this time had been widely used but maintained entirely by the user in postgres the database understood relationships and could retrieve information in related tables in a natural way using rules in the s stonebraker started a new company to commercialize postgres under the name illustra the company and technology were later purchased by informix installation ingres may be installed as a client installation or as a server installation the difference being that the client has no databases associated with it but allows access to databases created in server installations a typical site would install ingres client installations on its employees pcs and these would communicate with the ingres server installations on the sites core computing facility note that the expression instance is a synonym for installation an installation can be viewed as a collection of server processes shared memory and semaphores for interprocess communication as well as diskbased files used for transaction processing and in the event of a failure of the host or of the installation for database recovery installation identifier an installation is often referred to by its installation identifier this is a twocharacter casesensitive identifier beginning with a letter the default identifier is ii the installation identifier is used internally to compute what ports the ingres servers will listen on for example ii indicates that the servers will listen on port  plus the  port numbers after that any host machine or virtual machine may have multiple ingres installations on it but each installation must use unique identifiers to ensure that its clients and components communicate with the correct installation a single installation may use multiple installation identifiers the classic example is when wishing to run more than eight server processes furthermore although ingres database servers iidbms and ingres communication servers iigcc conventionally use the same installation identifier there is no requirement to do so installation paths at the point of creating the installation several critical paths need to be assigned once created these cannot be changed without reinstalling hence care should be taken in their choice these paths appear in the following table note that the ii prefix does not indicate that these are for the ii installation each installation regardless of its identifier will have its own set of these variables patching the installation is created by a privileged user of the host ie username root however the addition of software patches to the installation is performed by the installation owner typically the user ingres in ingres software patches are cumulative and sequentially numbered hence installing patch n will automatically include all the additions by patch n to determine the current installation version and patch level it is simply a matter of inspecting the text file iisystemingresversionrel the text file iisystemingresversiondat provides extra information on the date of installation note that both files are cumulative and the top entry is the current version and patch databases an ingres installation or instance may support many databases each being owned by any user known to the installation the installation will allow many databases to be available concurrently the number available is a configurable quantity note this simply restricts the number of databases available at any instant and many more databases may be created on creation of an ingres server installation the databases named iidbdb and imadb are created these databases are owned by the user ingres the database iidbdb is also known as the master catalog database and it contains many tables specific to the management of the installation itself the database imadb is the ingres management architecture database and it also contains many registered objects useful for management of the installation of particular note is that databases do not need to be presized each database in the installation is permitted to grow as large as the available disk space will permit multiple data locations each database may be created on any data location known to the installation if no data location is specified then the primary data location indicated by the installation default of iidatabase is assumed once created the database may then be extended to use any or all of the other data locations known to the installation a database with multiple locations has the advantage of allowing parallel backups and hence it can potentially reduce the backup time public or private databases may be marked as public or private at the point of creation or afterwards a public database is accessible to all known ingres users in the installation unless they have been specifically denied access a private database is accessible only to specified permitted users groups and roles unicode a database may be created with a specific unicode collation this attribute can also be added after creation ingres supports the unicode collation algorithm optional unicode support allows ingres to minimize its resource requirements distributed databases ingres provides a distributed database system via the ingresstar server a database must be created as distributed by suffixing the database name with the star service class once they have been created the tables views and procedures from other databases may be registered within the distributed database the distributed database may also have its own tables views and procedures the ingresnet server allows the source databases to be on any other ingres installation as well as on the installation which holds the distributed database the ingresbridge server allows the source databases to be noningres databases as well user access to the distributed database is exactly as per regular databases user grants to the registered tables and views are determined by the database from which they are registered queries may then be run across the tables as per normal although there are some restrictions on query types furthermore a user transparent twophase commit is inbuilt to the system database objects catalogs regardless of ownership each database is created with a set of tables and views owned by the user ingres these are referred to as catalogs and are used to control many aspects of the databases interaction with the world the master catalog database iidbdb has a specific set of catalogs which will not be loaded into any other database catalogs are publicly readable but cannot be altered by anyone other than a privileged user tables the database owner and permitted users are allowed to create tables as they wish within the database and may share access to these as they wish note that regardless of the database access mode publicprivate a table is private until the owner of the table grants other users some access to it tables are not presized at the point of creation ingres makes no restrictions and will allow any table to grow as far as disk space permits the same table name may be used by multiple table owners when a distinction needs to be made in the application code it may specify the full schema name of tableownertablename if the schema has not been specified then the system will check to see if the current user has a table of this name and if not it will then check if the database owner has a table of this name ingres supports four table types and has compressed subtypes available for each these types are heap hash isam indexed sequential btree binary tree the heap type is unstructured all others are structured tables where a primary key is designated these table types allow tables to be tailored to suit the needs of queries and considerably improve query performance the table type dictates the way in which data is stored within the table and the tables response to insert update delete or select requests the frequency of such activity dictates the occasional maintenance requirement of restructuring the table to ensure optimum query response a table may be located on any of the data locations that the database has been permitted to use the table may be spread across multiple locations a feature of particular use for large tables and for parallel backups ingres will attempt to spread the data evenly across all locations the table is permitted to use a table is composed of pages the data and the keying details for the table structure are all stored on these pages each table is permitted to grow to approx  million pages all the pages for the table are of a fixed size specified at creation or when last restructured the six available page sizes are k k k k k k the installation must be configured to support the chosen size typically an installation defaults to provide k k and k pages once a table has been created with a specific size it may be subsequently restructured to a different page size the correct choice of page size for a table can be beneficial in allowing both increased size in the table and in allowing the possibility of rowlevel locking available on page sizes of k and above each page may hold a maximum of  rows of data no row may span a page a certain amount of each page is reserved for system purposes hence the entire space is not available to data for example a k page has only  bytes of the total  available for data if larger tables are required the table may be partitioned each partition of the table is effectively a separate table and each may grow to  million pages the set of partitions then makes a logical table completely transparently to the users accessing the table the partitions may also be partitioned effectively providing a limitless table size this feature allows ingres databases to seamlessly grow from a few megabytes to several terabytes indexes each table may have zero one or more indexes created upon it an index may be of any structured type ie hash isam or btree the addition of a secondary index on the table can give improved access to the table data for specific queries indexes may be queried directly in most respects they behave just like tables an index may be created with a different page size to its base table both primary key and secondaryindex keys may be designated as unique or nonunique temporary tables ingres supports the creation of lightweight or temporary tables which exist purely for the lifetime of the connected session which creates them these tables can be structured as per regular tables but may not be shared the temporary table exists within the server until it grows too large at which point its details will be transparently written to a disk if this occurs the details will be removed as soon as the session disconnects they are useful in holding temporary data for reports and for simplifying complicated queries views a view is a logical object with no physical disk presence other than its definition a view is like a predefined select query on one or more tables or other views a view may be treated like any table but cannot have an index or structure imposed upon it constraints ingres supports the following table constraints as well as propagation constraint and on update cascade on foreign keys most of these constraints require a secondary index to perform their function if such an index is not nominated then ingres will automatically create an appropriate index on the table constraints may be created when the table is created or added afterwards database procedures a database procedure dbp is a named routine consisting of sql and procedural statements that is stored in the database close to the data when a dbp is created ingres optimizes and compiles the procedure and caches the generated code the database procedure can then be invoked directly from a client application program or from another database procedure or it can be triggered by a rule see below most of the usual sql statements are available supplemented by procedural code features such as variable creation and assignment flow of control and event and errorcontrol statements some advantages of database procedures database rules database rules may be created on tables also called triggers rules are typically used to enforce integrity checks which would be too complicated for simple constraints however they may be employed to perform other tasks such as raise events etc rules are triggered before or after nominated actions on the associated table note that older versions of ingres allowed only after rules to be defined there is no restriction on the number of rules a table may have if an action causes multiple rules to fire then the order of firing is undefined the rules will cause an associated database procedure to be executed that procedure is referred to as a rules fired procedure or rfp in most respects rfps and deps are similar in capability however there are some restrictions on the rfps there are also differences in the effects of errors being raised by rfps and deps in an rfp raising an error will cause the procedure to stop all statements executed by the procedure will be rolled back and the statement which caused the rule to fire will also be rolled back parameters to an rfp may be passed by value or reference for example before fired rules may use a parameter passed by reference to install a desired value in a column of the row of data which initially caused the rule to be fired data types ingres supports the conventional data types such as ingres supports user defined types though the object management extension ingres supports unicode with types ingres supports large objects with ingres supports proprietary types such as ingres supports geospatial data types version s and later backup and recovery journaling ingres is a fully transactional dbms these transactions may be recorded as journals associated with the database under the iijournal path the journals created by the dbms may then be examined as part of auditing activity or used in a database recovery to enable journaling on a database is a two step process namely note that the configuration of the ingres dbms allows for the new tables to be automatically journalenabled via the default journaling parameter some care should be taken with this facility as not all tables should be journaled for example a work table which is constantly emptied and refreshed should not be journaled as it places extra data in the journal system data which are generally irrelevant to auditing and not required for database recovery a tables journaling status may be easily altered however if journaling is enabled on the table the journaling will not commence until after the next occasion the database is backed up using the ckpdb command if the table is created journalenabled the journaling will commence immediately if journaling is disabled the effect is also immediate to examine the journals for a database in a human readable form is simply a matter of using the auditdb command the command is optionrich and has many features for auditing transactions committed within a given time frame by specified users on a nominated set of tables etc the command has other options which can be used as part of an audit trail recovery for a database backup the principal backup utility provided in the dbms is the command ckpdb ingres backups may be taken online where some user activity is permitted on the database or offline where no user activity is permitted on the database during online checkpoints users may still select insert update or delete from the database but are not permitted to drop tables modify existing structures or other ddl statements backups will capture the entire database by default however the ckpdb command may be directed to restrict itself to specific tables this ckpdb utility would typically create a tar file snapshot of the database these snapshots are referred to as checkpoints the files created are stored in the databases iicheckpoint location to allow for changes being made to the databases tables during the lifetime of the backup the system will also create dump files these reflect the changes being made and are used to ensure the database will be restored to a consistent state as at the start of the checkpoint if a database recovery is required the dump files created are stored in the databases iidump area a databases backup history may be examined using the infodb command it will print a human readable summary of the databases backup history  as well as other datum for example infodb iidbdb would generate the backup history of the master catalog database iidbdb other archiving tools may be used more recent versions of ingres also provide a cpiobased version furthermore some customisation of the backup is achievable by editing the checkpoint template file a typical user customisation is to direct tar to use compression multiple template files may be created and a specific one selected by pointing to it with the environment variable iicktmplfile the default template file is iisystemingresfilescktmpldef the alternatives to ckpdb are the utilities copydb or unloaddb these provide static snapshots only if these utilities are used care should be taken to ensure the correct representation of floating point numbers and dates it is not a good idea to back up an ingres database with an os dump of the databases data areas recovery the principal means of recovering an ingres database from a checkpoint is the utility rollforwarddb by default rollforwarddb will restore the database from its most recent valid backup and then apply all the databases journals and thus restore the database as completely as possible furthermore the command is option rich and it may be directed to note that for timebased recoveries the critical feature is when the transaction was committed not when it was started if it becomes necessary to see what transactions will be included in the recovery the time parameters can be used in the auditdb utility that utility will display the included transactions and their details customisation of the rollforwarddb utility may also be performed by editing the checkpoint template file for example if the checkpoints were compressed the rollforwarddb command will need a customisation installed to allow it to process the compressed tar file